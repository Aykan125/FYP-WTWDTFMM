import express from 'express';
import { Server } from 'socket.io';
import http from 'http';
import cors from 'cors';
import * as dotenv from 'dotenv';
import { handleCreateSession } from './events/createSession';
import { handleJoinSession } from './events/joinSession';
import { handleStartGame } from './events/startGame';
import { handleDisconnect } from './events/disconnect';

dotenv.config();

const app = express();
const server = http.createServer(app);

const io = new Server(server, {
  cors: {
    origin: process.env.CORS_ORIGIN || 'http://localhost:5173',
    methods: ['GET', 'POST'],
  },
});

// Middleware
app.use(cors());
app.use(express.json());

// Health check
app.get('/health', (req, res) => {
  res.json({ status: 'ok', timestamp: new Date().toISOString() });
});

// Socket.IO connection handling
io.on('connection', (socket) => {
  console.log(`✅ Client connected: ${socket.id}`);

  // Event handlers
  socket.on('create-session', (data) => handleCreateSession(io, socket, data));
  socket.on('join-session', (data) => handleJoinSession(io, socket, data));
  socket.on('start-game', (data) => handleStartGame(io, socket, data));
  socket.on('disconnect', () => handleDisconnect(io, socket));
});

const PORT = process.env.PORT || 3001;

server.listen(PORT, () => {
  console.log(`🚀 Server running on http://localhost:${PORT}`);
});
